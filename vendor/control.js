var CJS=CJS||{};CJS.start=function(){CJS.init();CJS.findScripts();CJS.downloadScripts();if(CJS.defer){if("undefined"!=typeof(document.readyState)&&"complete"===document.readyState){CJS.processScripts()}else{CJS.addHandler(window,'load',CJS.processScripts)}}else{alert("Immediate processing is not currently supported.");CJS.processScripts()}};CJS.findScripts=function(){var a=document.getElementsByTagName('script');var b=a.length;for(var i=0;i<b;i++){var c=a[i];if("text/cjs"===CJS.getAttribute(c,"type")&&"undefined"===typeof(c.cjsfound)){CJS.aScripts[CJS.aScripts.length]=c;c.cjsfound=true}}};CJS.downloadScripts=function(){var a=CJS.aScripts.length;for(var i=0;i<a;i++){var b=CJS.aScripts[i];var c=CJS.getAttribute(b,"data-cjssrc")||CJS.getAttribute(b,"cjssrc");if(c){CJS.downloadScript(c)}}};CJS.downloadScript=function(a){CJS.dprint("downloading "+a);if(CJS.bIE||CJS.bOpera){CJS.downloadScriptImage(a)}else{CJS.downloadScriptObject(a)}};CJS.downloadScriptImage=function(a){var b=new Image();b.onload=function(){CJS.onloadCallback(a)};b.onerror=function(){CJS.onloadCallback(a)};b.src=a};CJS.downloadScriptObject=function(a){if("undefined"===typeof(document.body)||!document.body){setTimeout("CJS.downloadScriptObject('"+a+"')",50);return}var b=document.createElement('object');b.data=a;b.width=0;b.height=0;b.onload=function(){CJS.onloadCallback(a)};b.onerror=function(){CJS.onloadCallback(a)};document.body.appendChild(b)};CJS.onloadCallback=function(a){CJS.hLoaded[a]=true};CJS.execCallback=function(a){CJS.dprint("execCallback: "+a);if(0===CJS.aExecs.length){CJS.dprint("ERROR: We finished executing a script but the exec queue is empty: "+a);return}if(a==CJS.aExecs[0][0]){CJS.aExecs.splice(0,1)}else{CJS.dprint("ERROR: We finished executing a script that wasn't on the queue: "+a)}if(CJS.aExecs.length){CJS.execScript(CJS.aExecs[0][0],CJS.aExecs[0][1])}};CJS.processScripts=function(){CJS.processNextScript()};CJS.processNextScript=function(){if(CJS.aScripts.length){var a=CJS.aScripts[0];CJS.curScript=a;var b=CJS.getAttribute(a,"data-cjssrc")||CJS.getAttribute(a,"cjssrc");var c=CJS.getAttribute(a,"data-cjsexec")||CJS.getAttribute(a,"cjsexec");if(b){if("false"===c){CJS.aScripts.splice(0,1);setTimeout(CJS.processNextScript,0)}else if(CJS.hLoaded[b]){CJS.processExternalScript(a,CJS.processNextScript);CJS.aScripts.splice(0,1)}else{CJS.dprint("processNextScript: waiting for script "+b);if("undefined"===typeof(a.startwait)){a.startwait=Number(new Date())}var d=Number(new Date())-a.startwait;if(d<CJS.maxWait){setTimeout(CJS.processNextScript,CJS.waitival)}else{alert("There was an error loading script: "+b)}}}else{CJS.processInlineScript(a);CJS.aScripts.splice(0,1);setTimeout(CJS.processNextScript,0)}return}CJS.findScripts();if(CJS.aScripts.length){CJS.downloadScripts();setTimeout(CJS.processNextScript,0);return}document.write=CJS.docwriteOrig;CJS.dprint("DONE processing scripts")};CJS.processInlineScript=function(a){CJS.curScript=a;var b=a.text;CJS.dprint("processInlineScript: processing script code: "+b.substring(0,64));CJS.eval(b)};CJS.processExternalScript=function(a,b){var c=CJS.getAttribute(a,"data-cjssrc")||CJS.getAttribute(a,"cjssrc");CJS.dprint("processExternalScript: processing script "+c);CJS.execScript(c,b)};CJS.execScript=function(b,c){CJS.dprint("execScript: "+b);if(0===CJS.aExecs.length){CJS.aExecs[CJS.aExecs.length]=[b,c]}else if(b!=CJS.aExecs[0][0]){CJS.dprint("execScript: queueing for later: "+b);CJS.aExecs[CJS.aExecs.length]=[b,c];return}var d=(function(a){switch(typeof(a)){case"string":a=new Function(a);break;case"function":break;default:a=new Function()}return a})(c);var e=function(){if(this.readyState&&this.readyState!="complete"&&this.readyState!="loaded"){return}CJS.execCallback(b);this.onload=this.onreadystatechange=null;d()};var f=document.createElement('script');f.onload=f.onreadystatechange=e;f.src=b;var g=document.getElementsByTagName('script')[0];g.parentNode.insertBefore(f,g)};CJS.eval=function(a){if(window.execScript){window.execScript(a)}else{var b=function(){window.eval.call(window,a)};b()}};CJS.init=function(){CJS.bInited=true;CJS.defer=("undefined"===typeof(CJS.defer)?true:CJS.defer);CJS.aScripts=[];CJS.hLoaded={};CJS.aExecs=[];CJS.bIE=(-1!=navigator.userAgent.indexOf('MSIE'));CJS.bChrome=(-1!=navigator.userAgent.indexOf('Chrome/'));CJS.bOpera=(-1!=navigator.userAgent.indexOf('Opera'));CJS.curScript=null;CJS.maxWait=5000;CJS.waitival=200;CJS.docwriteOrig=document.write;document.write=CJS.docwrite};CJS.getAttribute=function(a,b){var c=a.attributes;var d=c.length;for(var i=0;i<d;i++){var e=c[i];if(b===e.nodeName){return e.nodeValue}}return undefined};CJS.addHandler=function(a,b,c,d){d=(d)?true:false;if(a.addEventListener){a.addEventListener(b,c,d)}else if(a.attachEvent){a.attachEvent("on"+b,c)}else{if(a["on"+b]){}else{a["on"+b]=c}}};if("undefined"!=typeof(console)&&"undefined"!=typeof(console.log)){CJS.dprint=function(a){console.log("CJS "+Number(new Date())+": "+a)}}else{CJS.dprint=function(a){}};CJS.docwrite=function(a){if(CJS.curScript){if(!CJS.curScript.docwriteTarget){CJS.curScript.docwriteTarget=document.createElement('span');CJS.curScript.parentNode.insertBefore(CJS.curScript.docwriteTarget,CJS.curScript)}var b=a.indexOf("<script");if(-1===b){CJS.dprint("docwrite: "+a.substring(0,64));CJS.curScript.docwriteTarget.innerHTML+=a}else{var c=a.indexOf("<\/script>",b)+9;if(-1!=c){var d=a.substring(0,b);var e=a.substring(b,c);var f=a.substring(c+1);if(d){CJS.dprint("docwrite: "+d.substring(0,64));CJS.curScript.docwriteTarget.innerHTML+=d+f}CJS.docwriteScript(e)}}}else{CJS.dprint("ERROR: There's a problem with the async override of document.write.")}};CJS.docwriteScript=function(a){var b=a.match(/src='([^']*)/i)||a.match(/src="([^"]*)/i)||a.match(/src=([^ >]*)/i);if(b){var c=b[1];CJS.dprint("docwriteScript url = "+c);var d=document.createElement('script');d.src=c;document.body.appendChild(d)}else{}};CJS.start();
